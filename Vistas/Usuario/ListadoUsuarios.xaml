<Window x:Class="Vistas.Usuarios.ListadoUsuarios"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:Vistas.Usuarios"
        xmlns:ClaseBase="clr-namespace:ClaseBase;assembly=ClaseBase"
        Title="Listado de Usuarios" Height="600" Width="1000"
        WindowStartupLocation="CenterScreen" Loaded="Window_Loaded">

    <Window.Resources>
        <local:ContraseñaConverter x:Key="ContraseñaConverter"/>
        <local:RolConverter x:Key="RolConverter"/>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="80"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="60"/>
        </Grid.RowDefinitions>

        <Border Grid.Row="0" Background="#2c3e50" Margin="0,0,0,10">
            <StackPanel VerticalAlignment="Center">
                <TextBlock Text="LISTADO DE USUARIOS" 
                           FontSize="18" FontWeight="Bold" 
                           Foreground="White" HorizontalAlignment="Center"/>
                <TextBlock Text="Sistema de Gestión de Cursos" 
                           FontSize="12" 
                           Foreground="#bdc3c7" HorizontalAlignment="Center"/>
            </StackPanel>
        </Border>

        <Border Grid.Row="1" Background="White" 
                CornerRadius="10" Margin="20,0,20,10"
                BorderBrush="#bdc3c7" BorderThickness="1">
            <Grid Margin="15">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,10">
                    <TextBlock Text="Buscar por nombre de usuario:" VerticalAlignment="Center" Margin="0,0,10,0"/>
                    <TextBox Name="txtBuscar" Width="200" TextChanged="txtBuscar_TextChanged"/>
                    <Button Name="btnActualizar" Content="Actualizar" 
                            Width="100" Height="30" 
                            Background="#3498db" Foreground="White" 
                            BorderBrush="#2980b9" Click="btnActualizar_Click" Margin="10,0,0,0"/>
                    <Button Name="btnCerrar" Content="Cerrar" 
                            Width="80" Height="30" Margin="10,0,0,0"
                            Background="#e74c3c" Foreground="White" 
                            BorderBrush="#c0392b" Click="btnCerrar_Click"/>
                </StackPanel>

                <DataGrid Grid.Row="1" Name="dgUsuarios" 
                          AutoGenerateColumns="False"
                          IsReadOnly="True"
                          GridLinesVisibility="Horizontal"
                          HeadersVisibility="Column"
                          AlternatingRowBackground="#f8f9fa"
                          RowBackground="White"
                          BorderBrush="#dee2e6"
                          BorderThickness="1"
                          ColumnWidth="*"
                          CanUserResizeColumns="True"
                          CanUserReorderColumns="False"
                          SelectionMode="Single">

                    <DataGrid.Columns>
                        <DataGridTextColumn Header="ID" 
                                          Binding="{Binding Usu_ID}" 
                                          Width="60" 
                                          MinWidth="50">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                    <Setter Property="FontWeight" Value="Bold"/>
                                    <Setter Property="Foreground" Value="#2c3e50"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>

                        <DataGridTextColumn Header="Apellido y Nombre" 
                                          Binding="{Binding Usu_ApellidoNombre}" 
                                          Width="250" 
                                          MinWidth="200">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="Padding" Value="8,0"/>
                                    <Setter Property="FontWeight" Value="SemiBold"/>
                                    <Setter Property="Foreground" Value="#2c3e50"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>

                        <DataGridTextColumn Header="Usuario" 
                                          Binding="{Binding Usu_NombreUsuario}" 
                                          Width="180" 
                                          MinWidth="150">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="Padding" Value="8,0"/>
                                    <Setter Property="Foreground" Value="#34495e"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>

                        <DataGridTextColumn Header="Contraseña" 
                                          Binding="{Binding Usu_Contraseña, Converter={StaticResource ContraseñaConverter}}" 
                                          Width="120" 
                                          MinWidth="100">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                    <Setter Property="FontFamily" Value="Consolas"/>
                                    <Setter Property="FontSize" Value="16"/>
                                    <Setter Property="Foreground" Value="#95a5a6"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>

                        <DataGridTextColumn Header="Rol" 
                                          Binding="{Binding Rol_ID, Converter={StaticResource RolConverter}}" 
                                          Width="150" 
                                          MinWidth="120">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                    <Setter Property="FontWeight" Value="Bold"/>
                                    <Setter Property="Foreground" Value="#27ae60"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                    </DataGrid.Columns>

                    <DataGrid.ColumnHeaderStyle>
                        <Style TargetType="DataGridColumnHeader">
                            <Setter Property="Background" Value="#34495e"/>
                            <Setter Property="Foreground" Value="White"/>
                            <Setter Property="FontWeight" Value="Bold"/>
                            <Setter Property="Height" Value="40"/>
                            <Setter Property="HorizontalContentAlignment" Value="Center"/>
                            <Setter Property="VerticalContentAlignment" Value="Center"/>
                            <Setter Property="Padding" Value="8,5"/>
                            <Setter Property="BorderBrush" Value="#2c3e50"/>
                            <Setter Property="BorderThickness" Value="0,0,1,1"/>
                        </Style>
                    </DataGrid.ColumnHeaderStyle>

                    <DataGrid.RowStyle>
                        <Style TargetType="DataGridRow">
                            <Setter Property="Height" Value="45"/>
                            <Setter Property="BorderBrush" Value="#ecf0f1"/>
                            <Setter Property="BorderThickness" Value="0,0,0,1"/>
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#ecf0f1"/>
                                </Trigger>
                                <Trigger Property="IsSelected" Value="True">
                                    <Setter Property="Background" Value="#d5dbdb"/>
                                    <Setter Property="Foreground" Value="#2c3e50"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </DataGrid.RowStyle>

                    <DataGrid.CellStyle>
                        <Style TargetType="DataGridCell">
                            <Setter Property="BorderThickness" Value="0"/>
                            <Setter Property="Padding" Value="4"/>
                            <Style.Triggers>
                                <Trigger Property="IsSelected" Value="True">
                                    <Setter Property="Background" Value="Transparent"/>
                                    <Setter Property="Foreground" Value="{Binding RelativeSource={RelativeSource AncestorType=DataGridRow}, Path=Foreground}"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </DataGrid.CellStyle>
                </DataGrid>
            </Grid>
        </Border>

        <!-- Footer -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" 
                    HorizontalAlignment="Center" VerticalAlignment="Center">
            <TextBlock Name="lblTotalUsuarios" Text="Total de usuarios: 0" 
                       FontSize="12" Foreground="#7f8c8d" Margin="0,0,20,0"/>
            <TextBlock Text="© 2025 - LPOO II - Grupo 03" 
                       FontSize="10" Foreground="#7f8c8d"/>
        </StackPanel>
    </Grid>
</Window>