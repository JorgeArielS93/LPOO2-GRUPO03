<Window x:Class="Vistas.Usuarios.VistaPreviaImpresion"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:Vistas.Usuarios"
        Title="Vista Previa de Usuarios" Height="600" Width="1000"
        WindowStartupLocation="CenterScreen">

    <Window.Resources>
        <local:ContraseñaConverter x:Key="ContraseñaConverter"/>
        <local:RolConverter x:Key="RolConverter"/>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="80"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="60"/>
        </Grid.RowDefinitions>

        <Border Grid.Row="0" Background="#2c3e50" Margin="0,0,0,10">
            <StackPanel VerticalAlignment="Center">
                <TextBlock Text="VISTA PREVIA - LISTADO DE USUARIOS"
                           FontSize="18" FontWeight="Bold"
                           Foreground="White" HorizontalAlignment="Center"/>
                <TextBlock Text="Sistema de Gestión de Cursos"
                           FontSize="12"
                           Foreground="#bdc3c7" HorizontalAlignment="Center"/>
            </StackPanel>
        </Border>

        <Border Grid.Row="1" Background="White" 
                CornerRadius="10" Margin="20,0,20,10"
                BorderBrush="#bdc3c7" BorderThickness="1">

            <FlowDocumentReader Name="reader" Margin="10">
                <FlowDocument Name="DocMain"
                              PageWidth="900"
                              FontFamily="Segoe UI"
                              FontSize="13"
                              ColumnWidth="900">

                    <Paragraph FontSize="22" FontWeight="Bold" TextAlignment="Center" Margin="0,0,0,20">
                        LISTADO DE USUARIOS
                    </Paragraph>

                    <BlockUIContainer>
                        <ListView x:Name="lvUsuarios"
                                  BorderBrush="#dee2e6" BorderThickness="1"
                                  AlternationCount="2">
                            <ListView.Resources>
                                <Style TargetType="ListViewItem">
                                    <Setter Property="Height" Value="40"/>
                                    <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                                    <Style.Triggers>
                                        <Trigger Property="ItemsControl.AlternationIndex" Value="1">
                                            <Setter Property="Background" Value="#f8f9fa"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </ListView.Resources>

                            <ListView.View>
                                <GridView>

                                    <GridViewColumn Header="ID" Width="60"
                                                    DisplayMemberBinding="{Binding Usu_ID}"/>

                                    <GridViewColumn Header="Apellido y Nombre" Width="260"
                                                    DisplayMemberBinding="{Binding Usu_ApellidoNombre}"/>

                                    <GridViewColumn Header="Usuario" Width="200"
                                                    DisplayMemberBinding="{Binding Usu_NombreUsuario}"/>

                                    <GridViewColumn Header="Contraseña" Width="140">
                                        <GridViewColumn.CellTemplate>
                                            <DataTemplate>
                                                <TextBlock Text="{Binding Usu_Contraseña, Converter={StaticResource ContraseñaConverter}}"
                                                           HorizontalAlignment="Center"
                                                           FontFamily="Consolas"
                                                           FontSize="16"
                                                           Foreground="#95a5a6"/>
                                            </DataTemplate>
                                        </GridViewColumn.CellTemplate>
                                    </GridViewColumn>

                                    <GridViewColumn Header="Rol" Width="140">
                                        <GridViewColumn.CellTemplate>
                                            <DataTemplate>
                                                <TextBlock Text="{Binding Rol_ID, Converter={StaticResource RolConverter}}"
                                                           HorizontalAlignment="Center"
                                                           FontWeight="Bold"
                                                           Foreground="#27ae60"/>
                                            </DataTemplate>
                                        </GridViewColumn.CellTemplate>
                                    </GridViewColumn>

                                </GridView>
                            </ListView.View>
                        </ListView>
                    </BlockUIContainer>

                </FlowDocument>
            </FlowDocumentReader>

        </Border>


        <Grid Grid.Row="2" Margin="0,5,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <TextBlock Grid.Column="0"
               Text="© 2025 - Laboratorio de Programación Orientada a Objetos II - Grupo 03"
               HorizontalAlignment="Center" VerticalAlignment="Center"
               FontSize="11" Foreground="#7f8c8d"
               Margin="0,0,20,0"/>

            <Button Grid.Column="1" Name="btnPrint" Content="Imprimir" 
            Width="120" Height="35"
            Background="#3498db" Foreground="White"
            BorderBrush="#2980b9"
            HorizontalAlignment="Right" VerticalAlignment="Center"
            Margin="0,0,20,0"
            Click="btnPrint_Click"/>
        </Grid>

    </Grid>
</Window>
