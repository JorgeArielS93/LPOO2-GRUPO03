<Window x:Class="Vistas.GestionDocente" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
        xmlns:ClaseBase="clr-namespace:ClaseBase;assembly=ClaseBase" 
        xmlns:local="clr-namespace:Vistas"
        Title="GestionDocente" Height="600" Width="1000" 
        WindowStartupLocation="CenterScreen" Loaded="GestionDocente_Loaded">

    <Window.Resources>
        <local:ConversorNombreEstado x:Key="ConvNomEstado"/>
        <local:ConversorDeEstados x:Key="ConvColorEstado"/>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="80"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="60"/>
        </Grid.RowDefinitions>

        <Border Grid.Row="0" Background="#2c3e50" Margin="0,0,0,10">
            <StackPanel VerticalAlignment="Center">
                <TextBlock Text="GESTION DOCENTE" 
                       FontSize="18" FontWeight="Bold" 
                       Foreground="White" HorizontalAlignment="Center"/>
                <TextBlock Text="Sistema de Gestión de Cursos" 
                       FontSize="12" 
                       Foreground="#bdc3c7" HorizontalAlignment="Center"/>
            </StackPanel>
        </Border>

        <Border Grid.Row="1" Background="White" 
                CornerRadius="10" Margin="20,0,20,10"
                BorderBrush="#bdc3c7" BorderThickness="1">

            <Grid Margin="15">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,10">
                    <TextBlock Text="Seleccione Docente:" VerticalAlignment="Center" Margin="0,0,10,0"/>
                    <ComboBox Name="cmbSeleccionDocente" Width="200"
                          SelectionChanged="cmbSeleccionDocente_SelectionChanged"/>

                    <Button Name="btnCerrar" Content="Cerrar" 
                        Width="80" Height="30" Margin="10,0,0,0"
                        Background="#e74c3c" Foreground="White" 
                        BorderBrush="#c0392b" Click="btnCerrar_Click"/>
                </StackPanel>

                <DataGrid Grid.Row="1" Name="dgCursos"
                      AutoGenerateColumns="False"
                      IsReadOnly="True"
                      GridLinesVisibility="Horizontal"
                      HeadersVisibility="Column"
                      AlternatingRowBackground="#f8f9fa"
                      RowBackground="White"
                      BorderBrush="#dee2e6"
                      BorderThickness="1"
                      ColumnWidth="*"
                      CanUserResizeColumns="True"
                      CanUserReorderColumns="False"
                      SelectionMode="Single">

                    <DataGrid.Columns>

                        <DataGridTextColumn Header="Código" 
                                            Binding="{Binding Cur_ID}" 
                                            Width="80"
                                            MinWidth="50">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                    <Setter Property="FontWeight" Value="Bold"/>
                                    <Setter Property="Foreground" Value="#2c3e50"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>

                        <DataGridTextColumn Header="Nombre del Curso" 
                                            Binding="{Binding Cur_Nombre}" 
                                            Width="210"
                                            MinWidth="155">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="Padding" Value="8,0"/>
                                    <Setter Property="FontWeight" Value="SemiBold"/>
                                    <Setter Property="Foreground" Value="#2c3e50"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>

                        <DataGridTextColumn Header="Estado" 
                                            Binding="{Binding Est_ID, Converter={StaticResource ConvNomEstado}}" 
                                            Width="80"
                                            MinWidth="50">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="Padding" Value="8,0"/>
                                    <Setter Property="FontWeight" Value="SemiBold"/>
                                    <Setter Property="Foreground" Value="#2c3e50"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>


                        <DataGridTemplateColumn Header="Color" 
                                                Width="200"
                                                MinWidth="150">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Rectangle Width="100" Height="30"
                                  Fill="{Binding Est_ID, Converter={StaticResource ConvColorEstado}}"
                                  Stroke="Black"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn Header="Modificar Estado">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal">

                                        <ComboBox Width="100"
                                                  Margin="0,5,15,5"
                                                  x:Name="cmbEstado"
                                                  Loaded="cmbModificarEstado_Loaded"/>

                                        <Button Content="Modificar"
                                                    Width="120"
                                                    Margin="0,5,0,5"
                                                    Tag="{Binding}"
                                                    Click="btnModificar_Click"/>
                                    </StackPanel>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                    </DataGrid.Columns>

                    <DataGrid.ColumnHeaderStyle>
                        <Style TargetType="DataGridColumnHeader">
                            <Setter Property="Background" Value="#34495e"/>
                            <Setter Property="Foreground" Value="White"/>
                            <Setter Property="FontWeight" Value="Bold"/>
                            <Setter Property="Height" Value="40"/>
                            <Setter Property="HorizontalContentAlignment" Value="Center"/>
                            <Setter Property="VerticalContentAlignment" Value="Center"/>
                            <Setter Property="Padding" Value="8,5"/>
                            <Setter Property="BorderBrush" Value="#2c3e50"/>
                            <Setter Property="BorderThickness" Value="0,0,1,1"/>
                        </Style>
                    </DataGrid.ColumnHeaderStyle>

                    <DataGrid.RowStyle>
                        <Style TargetType="DataGridRow">
                            <Setter Property="Height" Value="45"/>
                            <Setter Property="BorderBrush" Value="#ecf0f1"/>
                            <Setter Property="BorderThickness" Value="0,0,0,1"/>
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#ecf0f1"/>
                                </Trigger>
                                <Trigger Property="IsSelected" Value="True">
                                    <Setter Property="Background" Value="#d5dbdb"/>
                                    <Setter Property="Foreground" Value="#2c3e50"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </DataGrid.RowStyle>

                    <DataGrid.CellStyle>
                        <Style TargetType="DataGridCell">
                            <Setter Property="BorderThickness" Value="0"/>
                            <Setter Property="Padding" Value="4"/>
                            <Style.Triggers>
                                <Trigger Property="IsSelected" Value="True">
                                    <Setter Property="Background" Value="Transparent"/>
                                    <Setter Property="Foreground" Value="{Binding RelativeSource={RelativeSource AncestorType=DataGridRow}, Path=Foreground}"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </DataGrid.CellStyle>

                </DataGrid>
            </Grid>
        </Border>

        <StackPanel Grid.Row="2" Orientation="Horizontal" 
                HorizontalAlignment="Center" VerticalAlignment="Center">
            <TextBlock Name="lblTotalCursos" Text="Total de cursos: 0" 
                   FontSize="12" Foreground="#7f8c8d" Margin="0,0,20,0"/>
            <TextBlock Text="© 2025 - LPOO II - Grupo 03" 
                   FontSize="10" Foreground="#7f8c8d"/>
        </StackPanel>
    </Grid>
</Window>
